// Copyright 2016 Scott Bevin, All Rights Reserved

#include "AXUpdateables.h"
#include "AXApplication.h"

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

/**
* Constructor
*/
AXIUpdateable::AXIUpdateable( )
{
	if( AXUpdateables* sys = AXUpdateables::GetFrom( AXApplication::Get( ) ) )
	{
		sys->mUpdateableObjects.push_back( this );
	}
}

/**
* Destructor
*/
AXIUpdateable::~AXIUpdateable( )
{
	if( AXUpdateables* sys = AXUpdateables::GetFrom( AXApplication::Get( ) ) )
	{
		sys->mUpdateableObjects.remove( this );
	}
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

AXString AXSystem< AXUpdateables >::sSystemName = "Updateables";

/**
* Update all the updateable objects
*/
void AXUpdateables::Update( float dt )
{
	for( AXIUpdateable* updateable : mUpdateableObjects )
	{
		updateable->Update( dt );
	}
}